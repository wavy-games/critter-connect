const a0_0x1ef6b2=a0_0x1b65;(function(_0x2e0303,_0x1fce29){const _0x4f8ec1=a0_0x1b65,_0x11d910=_0x2e0303();while(!![]){try{const _0x5cc945=-parseInt(_0x4f8ec1(0x1d5))/0x1+parseInt(_0x4f8ec1(0x1e3))/0x2+parseInt(_0x4f8ec1(0x21b))/0x3+parseInt(_0x4f8ec1(0x1ec))/0x4+-parseInt(_0x4f8ec1(0x1df))/0x5*(-parseInt(_0x4f8ec1(0x1bc))/0x6)+parseInt(_0x4f8ec1(0x1c1))/0x7+parseInt(_0x4f8ec1(0x1e4))/0x8*(-parseInt(_0x4f8ec1(0x1bf))/0x9);if(_0x5cc945===_0x1fce29)break;else _0x11d910['push'](_0x11d910['shift']());}catch(_0x140a84){_0x11d910['push'](_0x11d910['shift']());}}}(a0_0x3fcf,0xb3da7));import{App,ScreenDimensions}from'./game.js';import{Scenes,KeyboardEvents}from'./game.js';import{Scene}from'../helpers/Scene.js';import{Key}from'../helpers/KeyboardEvents.js';import{Size,Cell,Point}from'../helpers/GraphicsPrimitives.js';import{GridNode}from'../helpers/GridNode.js';import{SpriteButton}from'../helpers/SpriteButton.js';import{AnimationManager}from'../helpers/Animation.js';import{Label}from'../helpers/Label.js';import{GLevels}from'../board/Levels.js';import{GBoard}from'../board/Board.js';import{PlayerId,PlayerInfo,playerIsInteractive}from'../board/PlayerInfo.js';import{GameColor}from'./GameColors.js';import{fromPolar,toPolar}from'../helpers/PolarCoordinates.js';import{SpriteTile}from'./SpriteTile.js';import{ConnectionChecker}from'./GameScene-ConnectionChecker.js';import{TextPanel}from'../helpers/TextPanel.js';import{FontSpec}from'../helpers/FontSpec.js';import{OverlaySprites}from'./GameScene-OverlaySprites.js';export const CellSize=Size['of'](0x48,0x48);function a0_0x3fcf(){const _0xf9fe48=['isGameWon','from','setupKeyboard','./sprites/scene-background.png','addChild','visible','createHelpButton','none','log','./sprites/text-panel.png','anchor','58139fLlxZC','gameBoard','createSprites','create','scale','moveSpriteInDirection','./sprites/back-button.png','start','helpPanel','removeChild','182365xHuBMc','then','alpha','fadeInTitle','727398lbIkEa','211112uleoqE','col','Arial','maxSpriteMoveDistance','Bangers','container','length','helpCloseClicked','3420244nDBgNV','destroy','listen','rows','createGridNode','createGameBoard','fadeBoardSprites','Animation\x20done.','checkConnectors','handleKeyPress','createFinishMessage','createBackButton','Title','random','polar','animateTitle','tiles','spider','whenPressed','bold','BOARD\x20HAS\x20MORE\x20THAN\x20ONE\x20SOLUTION!','overlayAndAnimateSprites','eventMode','onKeyPressed','fadeOutTitle','cols','createSpritesFromBoard','helpButtonPressed','setRandomRotation','Sprite','location','Tap\x20on\x20the\x20board\x20to\x20rotate\x20\x0acells.\x20\x20Keep\x20rotating\x20cells\x20to\x20\x0aconnect\x20the\x20critters.\x0a\x0aThe\x20game\x20is\x20won\x20when\x20all\x20the\x20\x0acritters\x20are\x20joined\x20together!','center','checkAgainstSolvedBoard','Hello','board','Right','row','height','Game\x20Won!','interactive','angle','normal','unsetupKeyboard','animateSprites','static','boardChecker','1146786Kprzvn','mouse','overlaySprites','width','menu','listenForClicks','unlisten','set','sprites','text','156YQdniH','grid','Unexpected\x20key','1017pNfgEI','Game\x20Won','8592185zEfzWY','handleMoveRequest','\x20How\x20to\x20Play\x20','gridClicked','run','createSpriteTileFromTile','rotation','turtle','hasCell'];a0_0x3fcf=function(){return _0xf9fe48;};return a0_0x3fcf();}let Animator=null,FinishMessage=null;export const SpriteNames=[a0_0x1ef6b2(0x21c),'butterfly',a0_0x1ef6b2(0x1fd),'crab',a0_0x1ef6b2(0x1c8)];function a0_0x1b65(_0x3c3c95,_0x11f053){const _0x3fcf7a=a0_0x3fcf();return a0_0x1b65=function(_0x1b6540,_0x44e453){_0x1b6540=_0x1b6540-0x1bc;let _0x3f39bd=_0x3fcf7a[_0x1b6540];return _0x3f39bd;},a0_0x1b65(_0x3c3c95,_0x11f053);}export var CurrentLevel=0x1;export function setCurrentLevel(_0x375bbc){CurrentLevel=_0x375bbc;}export class GameScene extends Scene{constructor(_0x15b7d8){super(_0x15b7d8),this['message']=null;}[a0_0x1ef6b2(0x1d8)](){const _0x4b7956=a0_0x1ef6b2;console['log']('Current\x20Level\x20=\x20'+CurrentLevel),Animator=new AnimationManager(App),this[_0x4b7956(0x1cc)](),this['createBackground'](),this[_0x4b7956(0x1f7)](),this[_0x4b7956(0x1dd)]=null,this[_0x4b7956(0x1d0)]();let _0x49e09a=0x0;CurrentLevel-0x1<GLevels[_0x4b7956(0x1ea)]&&(_0x49e09a=CurrentLevel-0x1);this[_0x4b7956(0x20f)]=GBoard[_0x4b7956(0x1cb)](GLevels[_0x49e09a]);let _0x2ebe13=this[_0x4b7956(0x20f)][_0x4b7956(0x1ef)],_0x47092c=this['board']['cols'];this[_0x4b7956(0x1d6)]=this[_0x4b7956(0x1f1)](_0x2ebe13,_0x47092c,CellSize),this[_0x4b7956(0x1e9)][_0x4b7956(0x1ce)](this[_0x4b7956(0x1d6)]),this['grid']=this[_0x4b7956(0x1f0)](_0x2ebe13,_0x47092c,CellSize),this[_0x4b7956(0x1bd)][_0x4b7956(0x1e1)]=0.3,this[_0x4b7956(0x1e9)]['addChild'](this[_0x4b7956(0x1bd)]);let _0xcae2f4=new Point(this[_0x4b7956(0x1bd)]['x'],this[_0x4b7956(0x1bd)]['y']);this[_0x4b7956(0x223)]=this[_0x4b7956(0x206)](this['board'],_0xcae2f4);for(let _0x2e1512 of this[_0x4b7956(0x223)]){this[_0x4b7956(0x1e9)][_0x4b7956(0x1ce)](_0x2e1512);}this['createFinishMessage'](),this[_0x4b7956(0x21a)]=new ConnectionChecker(this[_0x4b7956(0x20f)],this[_0x4b7956(0x223)]),this[_0x4b7956(0x21d)]=new OverlaySprites(this[_0x4b7956(0x20f)]),this['listenForClicks']();}['createBackground'](){const _0x29be73=a0_0x1ef6b2;let _0x20f085=PIXI[_0x29be73(0x209)][_0x29be73(0x1cb)](_0x29be73(0x1cd));this[_0x29be73(0x1e9)][_0x29be73(0x1ce)](_0x20f085);}[a0_0x1ef6b2(0x1f1)](_0x5eaa29,_0x3dd655,_0x20572e){const _0x3efe7e=a0_0x1ef6b2;let _0x218705=PIXI[_0x3efe7e(0x209)][_0x3efe7e(0x1cb)]('./sprites/game-board.png');return _0x218705[_0x3efe7e(0x1d4)]['set'](0.5),_0x218705['x']=ScreenDimensions[_0x3efe7e(0x20c)]['x'],_0x218705['y']=ScreenDimensions['center']['y'],_0x218705[_0x3efe7e(0x21e)]=(_0x3dd655+0x1)*_0x20572e[_0x3efe7e(0x21e)],_0x218705[_0x3efe7e(0x212)]=(_0x5eaa29+0x1)*_0x20572e['height'],_0x218705;}[a0_0x1ef6b2(0x1f0)](_0x48bde3,_0x3cf40c,_0x69b885){const _0xe4035e=a0_0x1ef6b2;let _0xfca3c7=new GridNode(_0x48bde3,_0x3cf40c,_0x69b885);return _0xfca3c7['centerAt'](ScreenDimensions[_0xe4035e(0x20c)]['x'],ScreenDimensions[_0xe4035e(0x20c)]['y']),_0xfca3c7;}['createSpritesFromBoard'](_0x42520b,_0x127e6a){const _0x3caffd=a0_0x1ef6b2;var _0x44457b=[];for(let _0x23575b=0x0;_0x23575b<_0x42520b['rows'];_0x23575b++){for(let _0x14251e=0x0;_0x14251e<_0x42520b[_0x3caffd(0x205)];_0x14251e++){let _0x4c6690=_0x42520b[_0x3caffd(0x1fc)][_0x23575b][_0x14251e],_0x1f558e=this[_0x3caffd(0x1c6)](_0x4c6690,![]);_0x1f558e['x']+=_0x127e6a['x']+CellSize[_0x3caffd(0x21e)]/0x2,_0x1f558e['y']+=_0x127e6a['y']+CellSize['height']/0x2,this[_0x3caffd(0x208)](_0x1f558e),_0x44457b['push'](_0x1f558e);}}return _0x44457b;}[a0_0x1ef6b2(0x1c6)](_0x2a756b,_0x49fcbe){const _0x361d63=a0_0x1ef6b2;let _0x1858d6=_0x2a756b[_0x361d63(0x20a)],_0x59f4bd=SpriteNames[(CurrentLevel-0x1)%0x5],_0x4ca755=new SpriteTile(_0x2a756b,null,_0x59f4bd,null);return _0x4ca755['x']=_0x1858d6[_0x361d63(0x1e5)]*CellSize[_0x361d63(0x21e)],_0x4ca755['y']=_0x1858d6[_0x361d63(0x211)]*CellSize[_0x361d63(0x212)],_0x49fcbe!=undefined&&(_0x4ca755[_0x361d63(0x214)]=_0x49fcbe,_0x4ca755[_0x361d63(0x202)]=_0x49fcbe?_0x361d63(0x219):_0x361d63(0x1d1)),_0x4ca755;}[a0_0x1ef6b2(0x208)](_0x2b9107){const _0x4e0617=a0_0x1ef6b2;let _0x2e6cdc=[0x0,0x5a,0xb4,0x10e],_0x15a2ae=Math['floor'](Math[_0x4e0617(0x1f9)]()*0x4);_0x2b9107[_0x4e0617(0x215)]=_0x2e6cdc[_0x15a2ae];}[a0_0x1ef6b2(0x1f7)](){const _0x513434=a0_0x1ef6b2;let _0x151cfa=SpriteButton[_0x513434(0x1cb)](_0x513434(0x1db));_0x151cfa['x']=0x55,_0x151cfa['y']=0x46,_0x151cfa[_0x513434(0x1fe)]=backButtonPressed,this[_0x513434(0x1e9)][_0x513434(0x1ce)](_0x151cfa);}[a0_0x1ef6b2(0x1d0)](){const _0x535b5a=a0_0x1ef6b2;let _0x42e672=SpriteButton[_0x535b5a(0x1cb)]('./sprites/help-button.png');_0x42e672['x']=0x3a2,_0x42e672['y']=0x46,_0x42e672['whenPressed']=()=>{this['helpButtonPressed']();},this[_0x535b5a(0x1e9)][_0x535b5a(0x1ce)](_0x42e672);}[a0_0x1ef6b2(0x207)](){const _0x584c03=a0_0x1ef6b2,_0x5dd151=_0x584c03(0x1c3),_0x2f6f38=new FontSpec(_0x584c03(0x1e8),0x28,_0x584c03(0x216),GameColor['Title']),_0x3d17a3=_0x584c03(0x20b),_0x336efa=new FontSpec(_0x584c03(0x1e6),0x18,_0x584c03(0x216),GameColor['Label']);this[_0x584c03(0x1dd)]=TextPanel[_0x584c03(0x1cb)](_0x584c03(0x1d3),_0x5dd151,_0x2f6f38,_0x3d17a3,_0x336efa,()=>{const _0x47b971=_0x584c03;this[_0x47b971(0x1eb)]();}),this[_0x584c03(0x1dd)]['x']=ScreenDimensions[_0x584c03(0x21e)]/0x2,this['helpPanel']['y']=ScreenDimensions['height']/0x2,this[_0x584c03(0x1e9)][_0x584c03(0x1ce)](this['helpPanel']);}[a0_0x1ef6b2(0x1eb)](){const _0x25941d=a0_0x1ef6b2;this[_0x25941d(0x1e9)][_0x25941d(0x1de)](this[_0x25941d(0x1dd)]);}[a0_0x1ef6b2(0x1f6)](){const _0x4036c1=a0_0x1ef6b2;let _0x1c707e=new FontSpec(_0x4036c1(0x1e6),0x28,_0x4036c1(0x1ff),GameColor[_0x4036c1(0x1f8)]);FinishMessage=new Label(_0x4036c1(0x20e),_0x1c707e),FinishMessage['x']=ScreenDimensions[_0x4036c1(0x20c)]['x'],FinishMessage['y']=this['grid']['y']-0x50,FinishMessage[_0x4036c1(0x1d4)][_0x4036c1(0x222)](0.5),FinishMessage[_0x4036c1(0x1cf)]=![],this[_0x4036c1(0x1e9)][_0x4036c1(0x1ce)](FinishMessage);}[a0_0x1ef6b2(0x220)](){const _0x788391=a0_0x1ef6b2;this[_0x788391(0x1bd)]['whenClicked']=(_0x403841,_0x35888d)=>{const _0x1b5bb3=_0x788391;this[_0x1b5bb3(0x1c4)](_0x403841,_0x35888d);},this[_0x788391(0x1bd)][_0x788391(0x1ee)]();}[a0_0x1ef6b2(0x1c4)](_0x31c88c,_0x3644a3){const _0x57a2e7=a0_0x1ef6b2;let _0x34f4ab=this['board'][_0x57a2e7(0x205)],_0x3ac470=_0x3644a3+_0x31c88c*_0x34f4ab,_0x77151f=this[_0x57a2e7(0x223)][_0x3ac470]['angle'],_0x4d47c3=(_0x77151f+0x5a)%0x168;this[_0x57a2e7(0x223)][_0x3ac470][_0x57a2e7(0x215)]=_0x4d47c3,this[_0x57a2e7(0x1ca)]()&&(console[_0x57a2e7(0x1d2)](_0x57a2e7(0x213)),this[_0x57a2e7(0x1bd)][_0x57a2e7(0x1cf)]=![],this[_0x57a2e7(0x201)]());}[a0_0x1ef6b2(0x1ca)](){const _0x1f9707=a0_0x1ef6b2;let _0x3da5ee=this['boardChecker'][_0x1f9707(0x20d)](),_0x490df1=this[_0x1f9707(0x21a)][_0x1f9707(0x1f4)]();return _0x490df1&&!_0x3da5ee&&console[_0x1f9707(0x1d2)](_0x1f9707(0x200)),_0x490df1;}[a0_0x1ef6b2(0x201)](){const _0x48401a=a0_0x1ef6b2;let _0xd9d867=SpriteNames[(CurrentLevel-0x1)%0x5],_0x3ec9f4=new Point(this[_0x48401a(0x1bd)]['x'],this[_0x48401a(0x1bd)]['y']),_0x1d84df=this['overlaySprites'][_0x48401a(0x1d7)](_0xd9d867,_0x3ec9f4);for(let _0x192138 of _0x1d84df){this[_0x48401a(0x1e9)][_0x48401a(0x1ce)](_0x192138);}let _0xf056f2=this['maxSpriteMoveDistance']();FinishMessage[_0x48401a(0x224)]=_0x48401a(0x1c0),FinishMessage[_0x48401a(0x1cf)]=!![],FinishMessage[_0x48401a(0x1e1)]=0x0,Animator['wait'](0x1f4)[_0x48401a(0x1e0)](()=>{const _0x38e092=_0x48401a;Animator[_0x38e092(0x1c5)](0x1f4,this[_0x38e092(0x1e2)])['then'](()=>{const _0x25692c=_0x38e092;for(let _0x36d805 of _0x1d84df){_0x36d805['deltaRotate']=_0x36d805[_0x25692c(0x1fa)]-_0x36d805[_0x25692c(0x1c7)];}Animator['run'](0x3e8,(_0x25907e,_0x443de4)=>{const _0x4a60c1=_0x25692c;for(let _0x14a85a of _0x1d84df){let _0x2bffd5=_0x443de4*_0x14a85a['deltaRotate'];_0x14a85a[_0x4a60c1(0x1c7)]+=_0x2bffd5;}this['fadeGameBoard'](this[_0x4a60c1(0x1d6)],_0x25907e),this['fadeBoardSprites'](this[_0x4a60c1(0x223)],_0x25907e);})[_0x25692c(0x1e0)](()=>{const _0x353677=_0x25692c;Animator[_0x353677(0x1c5)](0xbb8,(_0x545b74,_0x14a491)=>{const _0x57de90=_0x353677;this[_0x57de90(0x218)](_0x14a491,_0xf056f2,_0x1d84df),this['fadeOutTitle'](_0x545b74);})['then'](()=>{const _0x2473b5=_0x353677;console[_0x2473b5(0x1d2)](_0x2473b5(0x1f3));});});});});}[a0_0x1ef6b2(0x218)](_0x3297c9,_0x4b3795,_0x56662e){const _0x2e1dda=a0_0x1ef6b2;let _0x5f4998=_0x3297c9*_0x4b3795;for(let _0x276aaa of _0x56662e){this[_0x2e1dda(0x1da)](_0x276aaa,_0x5f4998,_0x276aaa['polar']);}}[a0_0x1ef6b2(0x1da)](_0x4c8228,_0xdea6e5,_0x407121){let _0x4b299a=fromPolar(_0xdea6e5,_0x407121);_0x4c8228['x']+=_0x4b299a['x'],_0x4c8228['y']-=_0x4b299a['y'];}[a0_0x1ef6b2(0x1e2)](_0x5417e5){const _0x85821e=a0_0x1ef6b2;FinishMessage[_0x85821e(0x1e1)]=_0x5417e5;}[a0_0x1ef6b2(0x204)](_0x1f9185){const _0x10b3c0=a0_0x1ef6b2;FinishMessage[_0x10b3c0(0x1e1)]=0x1-0.3*_0x1f9185;}[a0_0x1ef6b2(0x1fb)](_0x5e9a13){const _0x1cb3d9=a0_0x1ef6b2;_0x5e9a13<0.5&&(FinishMessage[_0x1cb3d9(0x1d9)]['x']=0x1+0x1*_0x5e9a13,FinishMessage[_0x1cb3d9(0x1d9)]['y']=0x1+0x1*_0x5e9a13);}['fadeGameBoard'](_0x117e0b,_0x4344b5){_0x117e0b['alpha']=0x1-_0x4344b5;}[a0_0x1ef6b2(0x1f2)](_0xc624ce,_0x332bf1){const _0x2d85a2=a0_0x1ef6b2;for(let _0x3adc5a of _0xc624ce){_0x3adc5a[_0x2d85a2(0x1e1)]=0x1-0.6*_0x332bf1;}}[a0_0x1ef6b2(0x1e7)](){const _0x1fa7da=a0_0x1ef6b2;let _0x3f1506=(ScreenDimensions[_0x1fa7da(0x21e)]+CellSize[_0x1fa7da(0x21e)])/0x2,_0xfcf331=(ScreenDimensions[_0x1fa7da(0x212)]+CellSize[_0x1fa7da(0x212)])/0x2;return Math['sqrt'](_0x3f1506*_0x3f1506+_0xfcf331*_0xfcf331);}[a0_0x1ef6b2(0x1cc)](){KeyboardEvents['whenKeyPressed'](_0x36df9d=>{this['onKeyPressed'](_0x36df9d);}),KeyboardEvents['listen']();}[a0_0x1ef6b2(0x203)](_0x3a6bc1){const _0xe11019=a0_0x1ef6b2;switch(_0x3a6bc1){case Key['Left']:this[_0xe11019(0x1f5)](0x0,-0x1);break;case Key[_0xe11019(0x210)]:this['handleKeyPress'](0x0,0x1);break;case Key['Up']:this[_0xe11019(0x1f5)](-0x1,0x0);break;case Key['Down']:this[_0xe11019(0x1f5)](0x1,0x0);break;default:console['log'](_0xe11019(0x1be));}}[a0_0x1ef6b2(0x1f5)](_0x373bd8,_0x4de48a){const _0x4384bb=a0_0x1ef6b2;let _0x3d807c=this['currentPlayerCell'](PlayerId['Ship']),_0x44e1cd=Cell['from'](_0x3d807c['row']+_0x373bd8,_0x3d807c['col']+_0x4de48a);this[_0x4384bb(0x20f)][_0x4384bb(0x1c9)](_0x44e1cd)&&this[_0x4384bb(0x1c2)](_0x44e1cd);}[a0_0x1ef6b2(0x217)](){const _0x5865f6=a0_0x1ef6b2;KeyboardEvents[_0x5865f6(0x221)]();}['handleMoveRequest'](_0xaf9ad){}['update'](){}[a0_0x1ef6b2(0x1ed)](){const _0x283065=a0_0x1ef6b2;this[_0x283065(0x217)]();}}function backButtonPressed(){const _0x2c1a84=a0_0x1ef6b2;Scenes[_0x2c1a84(0x1dc)](_0x2c1a84(0x21f));}