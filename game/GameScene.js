const a0_0x3cf917=a0_0x1141;(function(_0xa18bfe,_0x58a6ca){const _0x2e268d=a0_0x1141,_0x1a616a=_0xa18bfe();while(!![]){try{const _0x5ab828=-parseInt(_0x2e268d(0x136))/0x1*(-parseInt(_0x2e268d(0x16a))/0x2)+-parseInt(_0x2e268d(0x162))/0x3+parseInt(_0x2e268d(0x14a))/0x4+parseInt(_0x2e268d(0x17c))/0x5*(parseInt(_0x2e268d(0x151))/0x6)+parseInt(_0x2e268d(0x19d))/0x7+parseInt(_0x2e268d(0x183))/0x8*(parseInt(_0x2e268d(0x139))/0x9)+-parseInt(_0x2e268d(0x138))/0xa;if(_0x5ab828===_0x58a6ca)break;else _0x1a616a['push'](_0x1a616a['shift']());}catch(_0x34fb83){_0x1a616a['push'](_0x1a616a['shift']());}}}(a0_0x1222,0xa7774));import{App,ScreenDimensions}from'./game.js';function a0_0x1222(){const _0xa524e9=['Label','from','container','cols','createSpritesFromBoard','./sprites/text-panel.png','gridClicked','angle','sprites','createBackButton','create','Unexpected\x20key','boardChecker','fadeInTitle','whenClicked','row','gameBoard','rows','272454ihRTCz','Ship','turtle','BOARD\x20HAS\x20MORE\x20THAN\x20ONE\x20SOLUTION!','removeChild','wait','butterfly','createHelpButton','alpha','139808GSRwBh','anchor','10594360tPZjbb','28503dZwEqh','overlaySprites','createSprites','helpButtonPressed','deltaRotate','fadeGameBoard','checkAgainstSolvedBoard','\x20How\x20to\x20Play\x20','./sprites/back-button.png','createGridNode','whenKeyPressed','moveSpriteInDirection','polar','Hello','rotation','isGameWon','createBackground','2785600OBIaGt','listenForClicks','width','set','location','height','onKeyPressed','18138fnrboW','currentPlayerCell','setupKeyboard','log','eventMode','addChild','grid','destroy','handleKeyPress','createFinishMessage','Game\x20Won','interactive','whenPressed','helpPanel','board','Left','animateTitle','1148604ShaMKO','./sprites/help-button.png','Current\x20Level\x20=\x20','maxSpriteMoveDistance','visible','scale','unsetupKeyboard','checkConnectors','2txKCPR','run','text','normal','center','fadeOutTitle','./sprites/game-board.png','handleMoveRequest','listen','message','tiles','overlayAndAnimateSprites','unlisten','col','then','Arial','createSpriteTileFromTile','Sprite','1135YJKZYQ','update','Title','animateSprites','bold','floor','setRandomRotation','1432TrUwXr','none','createGameBoard','sqrt','./sprites/scene-background.png','crab','fadeBoardSprites','Animation\x20done.'];a0_0x1222=function(){return _0xa524e9;};return a0_0x1222();}function a0_0x1141(_0x41d517,_0x4c8d4c){const _0x12221a=a0_0x1222();return a0_0x1141=function(_0x114120,_0x39519c){_0x114120=_0x114120-0x133;let _0x4967c0=_0x12221a[_0x114120];return _0x4967c0;},a0_0x1141(_0x41d517,_0x4c8d4c);}import{Scenes,KeyboardEvents}from'./game.js';import{Scene}from'../helpers/Scene.js';import{Key}from'../helpers/KeyboardEvents.js';import{Size,Cell,Point}from'../helpers/GraphicsPrimitives.js';import{GridNode}from'../helpers/GridNode.js';import{SpriteButton}from'../helpers/SpriteButton.js';import{AnimationManager}from'../helpers/Animation.js';import{Label}from'../helpers/Label.js';import{GLevels}from'../board/Levels.js';import{GBoard}from'../board/Board.js';import{PlayerId,PlayerInfo,playerIsInteractive}from'../board/PlayerInfo.js';import{GameColor}from'./GameColors.js';import{fromPolar,toPolar}from'../helpers/PolarCoordinates.js';import{SpriteTile}from'./SpriteTile.js';import{ConnectionChecker}from'./GameScene-ConnectionChecker.js';import{TextPanel}from'../helpers/TextPanel.js';import{FontSpec}from'../helpers/FontSpec.js';import{OverlaySprites}from'./GameScene-OverlaySprites.js';export const CellSize=Size['of'](0x48,0x48);let Animator=null,FinishMessage=null;export const SpriteNames=['mouse',a0_0x3cf917(0x133),'spider',a0_0x3cf917(0x188),a0_0x3cf917(0x19f)];export var CurrentLevel=0x1;export function setCurrentLevel(_0x175c65){CurrentLevel=_0x175c65;}export class GameScene extends Scene{constructor(_0x445adf){const _0x1c9a4b=a0_0x3cf917;super(_0x445adf),this[_0x1c9a4b(0x173)]=null;}[a0_0x3cf917(0x195)](){const _0x1b9112=a0_0x3cf917;console[_0x1b9112(0x154)](_0x1b9112(0x164)+CurrentLevel),Animator=new AnimationManager(App),this[_0x1b9112(0x153)](),this[_0x1b9112(0x149)](),this['createBackButton'](),this[_0x1b9112(0x15e)]=null,this[_0x1b9112(0x134)]();let _0x11ea60=0x0;CurrentLevel-0x1<GLevels['length']&&(_0x11ea60=CurrentLevel-0x1);this[_0x1b9112(0x15f)]=GBoard['from'](GLevels[_0x11ea60]);let _0x4ae7cf=this[_0x1b9112(0x15f)]['rows'],_0x2081ac=this[_0x1b9112(0x15f)]['cols'];this[_0x1b9112(0x19b)]=this[_0x1b9112(0x185)](_0x4ae7cf,_0x2081ac,CellSize),this[_0x1b9112(0x18d)]['addChild'](this[_0x1b9112(0x19b)]),this['grid']=this['createGridNode'](_0x4ae7cf,_0x2081ac,CellSize),this[_0x1b9112(0x157)]['alpha']=0.3,this['container'][_0x1b9112(0x156)](this[_0x1b9112(0x157)]);let _0x3c6ad4=new Point(this['grid']['x'],this['grid']['y']);this[_0x1b9112(0x193)]=this[_0x1b9112(0x18f)](this['board'],_0x3c6ad4);for(let _0x615dc2 of this[_0x1b9112(0x193)]){this[_0x1b9112(0x18d)][_0x1b9112(0x156)](_0x615dc2);}this[_0x1b9112(0x15a)](),this[_0x1b9112(0x197)]=new ConnectionChecker(this[_0x1b9112(0x15f)],this[_0x1b9112(0x193)]),this['overlaySprites']=new OverlaySprites(this[_0x1b9112(0x15f)]),this[_0x1b9112(0x14b)]();}['createBackground'](){const _0x3240f5=a0_0x3cf917;let _0x493849=PIXI[_0x3240f5(0x17b)][_0x3240f5(0x18c)](_0x3240f5(0x187));this[_0x3240f5(0x18d)]['addChild'](_0x493849);}['createGameBoard'](_0x4af3ba,_0x656cfb,_0x47b4ea){const _0x1f03b0=a0_0x3cf917;let _0x5ed585=PIXI[_0x1f03b0(0x17b)][_0x1f03b0(0x18c)](_0x1f03b0(0x170));return _0x5ed585[_0x1f03b0(0x137)][_0x1f03b0(0x14d)](0.5),_0x5ed585['x']=ScreenDimensions[_0x1f03b0(0x16e)]['x'],_0x5ed585['y']=ScreenDimensions[_0x1f03b0(0x16e)]['y'],_0x5ed585[_0x1f03b0(0x14c)]=(_0x656cfb+0x1)*_0x47b4ea[_0x1f03b0(0x14c)],_0x5ed585[_0x1f03b0(0x14f)]=(_0x4af3ba+0x1)*_0x47b4ea[_0x1f03b0(0x14f)],_0x5ed585;}[a0_0x3cf917(0x142)](_0x1131b9,_0x1b9e4b,_0x4c2b33){const _0x5dfd63=a0_0x3cf917;let _0x517cbe=new GridNode(_0x1131b9,_0x1b9e4b,_0x4c2b33);return _0x517cbe['centerAt'](ScreenDimensions['center']['x'],ScreenDimensions[_0x5dfd63(0x16e)]['y']),_0x517cbe;}[a0_0x3cf917(0x18f)](_0x4bcdbd,_0x52db8b){const _0x149b99=a0_0x3cf917;var _0x1a2e80=[];for(let _0x3b7af5=0x0;_0x3b7af5<_0x4bcdbd[_0x149b99(0x19c)];_0x3b7af5++){for(let _0x6c71e0=0x0;_0x6c71e0<_0x4bcdbd[_0x149b99(0x18e)];_0x6c71e0++){let _0x1113c6=_0x4bcdbd[_0x149b99(0x174)][_0x3b7af5][_0x6c71e0],_0x23305e=this['createSpriteTileFromTile'](_0x1113c6,![]);_0x23305e['x']+=_0x52db8b['x']+CellSize[_0x149b99(0x14c)]/0x2,_0x23305e['y']+=_0x52db8b['y']+CellSize[_0x149b99(0x14f)]/0x2,this[_0x149b99(0x182)](_0x23305e),_0x1a2e80['push'](_0x23305e);}}return _0x1a2e80;}[a0_0x3cf917(0x17a)](_0x3b9d06,_0x42db04){const _0x2ff916=a0_0x3cf917;let _0x5aceaf=_0x3b9d06[_0x2ff916(0x14e)],_0x1fcf5c=SpriteNames[(CurrentLevel-0x1)%0x5],_0x52e9bf=new SpriteTile(_0x3b9d06,null,_0x1fcf5c,null);return _0x52e9bf['x']=_0x5aceaf[_0x2ff916(0x177)]*CellSize[_0x2ff916(0x14c)],_0x52e9bf['y']=_0x5aceaf[_0x2ff916(0x19a)]*CellSize[_0x2ff916(0x14f)],_0x42db04!=undefined&&(_0x52e9bf[_0x2ff916(0x15c)]=_0x42db04,_0x52e9bf[_0x2ff916(0x155)]=_0x42db04?'static':_0x2ff916(0x184)),_0x52e9bf;}['setRandomRotation'](_0x4ed0ad){const _0x467ba9=a0_0x3cf917;let _0x5046c9=[0x0,0x5a,0xb4,0x10e],_0x3f7508=Math[_0x467ba9(0x181)](Math['random']()*0x4);_0x4ed0ad['angle']=_0x5046c9[_0x3f7508];}[a0_0x3cf917(0x194)](){const _0x17f199=a0_0x3cf917;let _0x4ddc6c=SpriteButton[_0x17f199(0x18c)](_0x17f199(0x141));_0x4ddc6c['x']=0x55,_0x4ddc6c['y']=0x46,_0x4ddc6c[_0x17f199(0x15d)]=backButtonPressed,this[_0x17f199(0x18d)][_0x17f199(0x156)](_0x4ddc6c);}[a0_0x3cf917(0x134)](){const _0x1c8f9f=a0_0x3cf917;let _0xf71ddf=SpriteButton[_0x1c8f9f(0x18c)](_0x1c8f9f(0x163));_0xf71ddf['x']=0x3a2,_0xf71ddf['y']=0x46,_0xf71ddf[_0x1c8f9f(0x15d)]=()=>{this['helpButtonPressed']();},this['container'][_0x1c8f9f(0x156)](_0xf71ddf);}[a0_0x3cf917(0x13c)](){const _0x156c8a=a0_0x3cf917,_0x1806d6=_0x156c8a(0x140),_0x599326=new FontSpec('Bangers',0x28,_0x156c8a(0x16d),GameColor[_0x156c8a(0x17e)]),_0x175fa9='Tap\x20on\x20the\x20board\x20to\x20rotate\x20\x0acells.\x20\x20Keep\x20rotating\x20cells\x20to\x20\x0aconnect\x20the\x20critters.\x20\x20The\x20\x0agame\x20is\x20won\x20when\x20all\x20the\x20\x0acritters\x20are\x20joined\x20together!',_0x311616=new FontSpec(_0x156c8a(0x179),0x1c,'normal',GameColor[_0x156c8a(0x18b)]);this['helpPanel']=TextPanel[_0x156c8a(0x18c)](_0x156c8a(0x190),_0x1806d6,_0x599326,_0x175fa9,_0x311616,()=>{this['helpCloseClicked']();}),this[_0x156c8a(0x15e)]['x']=ScreenDimensions['width']/0x2,this[_0x156c8a(0x15e)]['y']=ScreenDimensions[_0x156c8a(0x14f)]/0x2,this['container'][_0x156c8a(0x156)](this['helpPanel']);}['helpCloseClicked'](){const _0x446b77=a0_0x3cf917;this[_0x446b77(0x18d)][_0x446b77(0x1a1)](this[_0x446b77(0x15e)]);}[a0_0x3cf917(0x15a)](){const _0x2ff13f=a0_0x3cf917;let _0x30b976=new FontSpec(_0x2ff13f(0x179),0x28,_0x2ff13f(0x180),GameColor['Title']);FinishMessage=new Label(_0x2ff13f(0x146),_0x30b976),FinishMessage['x']=ScreenDimensions[_0x2ff13f(0x16e)]['x'],FinishMessage['y']=this['grid']['y']-0x50,FinishMessage[_0x2ff13f(0x137)][_0x2ff13f(0x14d)](0.5),FinishMessage[_0x2ff13f(0x166)]=![],this[_0x2ff13f(0x18d)][_0x2ff13f(0x156)](FinishMessage);}[a0_0x3cf917(0x14b)](){const _0x1ad4fd=a0_0x3cf917;this[_0x1ad4fd(0x157)][_0x1ad4fd(0x199)]=(_0x428b97,_0xeec64f)=>{const _0x293083=_0x1ad4fd;this[_0x293083(0x191)](_0x428b97,_0xeec64f);},this[_0x1ad4fd(0x157)]['listen']();}['gridClicked'](_0x4095f6,_0x5c6e35){const _0x5da733=a0_0x3cf917;let _0x39642f=this[_0x5da733(0x15f)][_0x5da733(0x18e)],_0x6c248a=_0x5c6e35+_0x4095f6*_0x39642f,_0xb9a6b9=this['sprites'][_0x6c248a][_0x5da733(0x192)],_0x196b07=(_0xb9a6b9+0x5a)%0x168;this[_0x5da733(0x193)][_0x6c248a][_0x5da733(0x192)]=_0x196b07,this[_0x5da733(0x148)]()&&(console[_0x5da733(0x154)]('Game\x20Won!'),this[_0x5da733(0x157)][_0x5da733(0x166)]=![],this[_0x5da733(0x175)]());}[a0_0x3cf917(0x148)](){const _0x370fe2=a0_0x3cf917;let _0xde84e4=this[_0x370fe2(0x197)][_0x370fe2(0x13f)](),_0x55ebcf=this[_0x370fe2(0x197)][_0x370fe2(0x169)]();return _0x55ebcf&&!_0xde84e4&&console[_0x370fe2(0x154)](_0x370fe2(0x1a0)),_0x55ebcf;}[a0_0x3cf917(0x175)](){const _0x5acceb=a0_0x3cf917;let _0x47ed43=SpriteNames[(CurrentLevel-0x1)%0x5],_0x5f500b=new Point(this[_0x5acceb(0x157)]['x'],this['grid']['y']),_0x32e227=this[_0x5acceb(0x13a)][_0x5acceb(0x13b)](_0x47ed43,_0x5f500b);for(let _0x40569a of _0x32e227){this[_0x5acceb(0x18d)][_0x5acceb(0x156)](_0x40569a);}let _0x1c7000=this[_0x5acceb(0x165)]();FinishMessage[_0x5acceb(0x16c)]=_0x5acceb(0x15b),FinishMessage[_0x5acceb(0x166)]=!![],FinishMessage['alpha']=0x0,Animator[_0x5acceb(0x1a2)](0x1f4)[_0x5acceb(0x178)](()=>{const _0x3dad12=_0x5acceb;Animator[_0x3dad12(0x16b)](0x1f4,this[_0x3dad12(0x198)])['then'](()=>{const _0x43b44b=_0x3dad12;for(let _0x33e803 of _0x32e227){_0x33e803[_0x43b44b(0x13d)]=_0x33e803[_0x43b44b(0x145)]-_0x33e803[_0x43b44b(0x147)];}Animator[_0x43b44b(0x16b)](0x3e8,(_0x241863,_0x54ed58)=>{const _0xe2b949=_0x43b44b;for(let _0x5e4758 of _0x32e227){let _0x937411=_0x54ed58*_0x5e4758[_0xe2b949(0x13d)];_0x5e4758[_0xe2b949(0x147)]+=_0x937411;}this[_0xe2b949(0x13e)](this['gameBoard'],_0x241863),this['fadeBoardSprites'](this[_0xe2b949(0x193)],_0x241863);})['then'](()=>{const _0x2325b5=_0x43b44b;Animator[_0x2325b5(0x16b)](0xbb8,(_0x38c3fb,_0x129b67)=>{const _0x206929=_0x2325b5;this[_0x206929(0x17f)](_0x129b67,_0x1c7000,_0x32e227),this['fadeOutTitle'](_0x38c3fb);})['then'](()=>{const _0x594550=_0x2325b5;console[_0x594550(0x154)](_0x594550(0x18a));});});});});}[a0_0x3cf917(0x17f)](_0x5ba70b,_0x1964e4,_0x59ffc9){const _0x5eb120=a0_0x3cf917;let _0x5546ee=_0x5ba70b*_0x1964e4;for(let _0x1c3162 of _0x59ffc9){this[_0x5eb120(0x144)](_0x1c3162,_0x5546ee,_0x1c3162[_0x5eb120(0x145)]);}}['moveSpriteInDirection'](_0x3d01a2,_0x4773e6,_0x3588da){let _0x125e52=fromPolar(_0x4773e6,_0x3588da);_0x3d01a2['x']+=_0x125e52['x'],_0x3d01a2['y']-=_0x125e52['y'];}[a0_0x3cf917(0x198)](_0x4fd177){const _0x25f12c=a0_0x3cf917;FinishMessage[_0x25f12c(0x135)]=_0x4fd177;}[a0_0x3cf917(0x16f)](_0x153e66){const _0x477106=a0_0x3cf917;FinishMessage[_0x477106(0x135)]=0x1-0.3*_0x153e66;}[a0_0x3cf917(0x161)](_0x35bf27){const _0x5551cb=a0_0x3cf917;_0x35bf27<0.5&&(FinishMessage[_0x5551cb(0x167)]['x']=0x1+0x1*_0x35bf27,FinishMessage[_0x5551cb(0x167)]['y']=0x1+0x1*_0x35bf27);}[a0_0x3cf917(0x13e)](_0x3ca8ad,_0x2f12a2){const _0x5a2078=a0_0x3cf917;_0x3ca8ad[_0x5a2078(0x135)]=0x1-_0x2f12a2;}[a0_0x3cf917(0x189)](_0x31dca1,_0x1a583d){const _0x4c8d02=a0_0x3cf917;for(let _0xa57ef6 of _0x31dca1){_0xa57ef6[_0x4c8d02(0x135)]=0x1-0.6*_0x1a583d;}}['maxSpriteMoveDistance'](){const _0x1b8d47=a0_0x3cf917;let _0x50b8af=(ScreenDimensions[_0x1b8d47(0x14c)]+CellSize['width'])/0x2,_0x1b2da5=(ScreenDimensions[_0x1b8d47(0x14f)]+CellSize[_0x1b8d47(0x14f)])/0x2;return Math[_0x1b8d47(0x186)](_0x50b8af*_0x50b8af+_0x1b2da5*_0x1b2da5);}['setupKeyboard'](){const _0xe26201=a0_0x3cf917;KeyboardEvents[_0xe26201(0x143)](_0x42aac6=>{const _0xe89960=_0xe26201;this[_0xe89960(0x150)](_0x42aac6);}),KeyboardEvents[_0xe26201(0x172)]();}[a0_0x3cf917(0x150)](_0x520e09){const _0x2084d4=a0_0x3cf917;switch(_0x520e09){case Key[_0x2084d4(0x160)]:this[_0x2084d4(0x159)](0x0,-0x1);break;case Key['Right']:this[_0x2084d4(0x159)](0x0,0x1);break;case Key['Up']:this['handleKeyPress'](-0x1,0x0);break;case Key['Down']:this[_0x2084d4(0x159)](0x1,0x0);break;default:console[_0x2084d4(0x154)](_0x2084d4(0x196));}}['handleKeyPress'](_0x553489,_0x1810d0){const _0x4c7619=a0_0x3cf917;let _0x402705=this[_0x4c7619(0x152)](PlayerId[_0x4c7619(0x19e)]),_0x25086e=Cell[_0x4c7619(0x18c)](_0x402705[_0x4c7619(0x19a)]+_0x553489,_0x402705[_0x4c7619(0x177)]+_0x1810d0);this[_0x4c7619(0x15f)]['hasCell'](_0x25086e)&&this[_0x4c7619(0x171)](_0x25086e);}[a0_0x3cf917(0x168)](){const _0x2c5cf1=a0_0x3cf917;KeyboardEvents[_0x2c5cf1(0x176)]();}['handleMoveRequest'](_0x38467c){}[a0_0x3cf917(0x17d)](){}[a0_0x3cf917(0x158)](){const _0x1718d4=a0_0x3cf917;this[_0x1718d4(0x168)]();}}function backButtonPressed(){Scenes['start']('menu');}